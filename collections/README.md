## Collections Frontend

### Local Setup

Check out the repository and install packages:

```bash
git clone git@github.com:Pocket/curation-admin-tools.git
cd curation-admin-tools/collections
npm install
```

Add a file with an environment variable so that the app can connect to the API. Environment variables in React must start with the `REACT_APP_` prefix (read more [here](https://create-react-app.dev/docs/adding-custom-environment-variables/)).

Create an `.env` file in the root of the project (the `/collections` directory) and add the following lines to it:

```dotenv
REACT_APP_CLIENT_API_ENDPOINT="[YOUR_CLIENT_API_ADDRESS_HERE]"
REACT_APP_COLLECTION_API_ENDPOINT="[YOUR_COLLECTION_API_ADDRESS_HERE]"
```

Start the React app:

```bash
npm start
```

The app will open in your default browser at [http://localhost:3000](http://localhost:3000).

### Testing

To run the tests, execute

```bash
npm run test
```

### Schema updates

If the GraphQL schema of the API changes, or if you add new queries, mutations or fragments to the repository under `src/api`, you need to re-run the relevant type generation script. Note that the following command needs the API to be available at the address defined in our `.env` above:

To refresh types for Collection API, run

```bash
npm run api:generate-collection-types
```

To update types for Client API, run

```bash
npm run api:generate-client-types
```

The generated types are saved in a file named `generatedTypes.ts` in the relevant API folder and automatically formatted with Prettier. Check in the changes to the repository but do not edit this file as the next time the types will be regenerated any updates you make will be lost.
