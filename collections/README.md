## Collections Frontend

### Local Setup

Check out the repository and install packages:

```bash
git clone git@github.com:Pocket/curation-admin-tools.git
cd curation-admin-tools/collections
npm install
```

Add a file with an environment variable so that the app can connect to the API. Environment variables in React must start with the `REACT_APP_` prefix (read more [here](https://create-react-app.dev/docs/adding-custom-environment-variables/)).

Create an `.env` file in the root of the project (the `/collections` directory) and add the following line to it:

```dotenv
REACT_APP_API_ENDPOINT="[YOUR_API_ADDRESS_HERE]"
```

Start the React app:

```bash
npm start
```

The app will open in your default browser at [http://localhost:3000](http://localhost:3000).

### Testing

To run the tests, execute

```bash
npm run test
```

### Schema updates

If the GraphQL schema of the API changes, or if you add new queries, mutations or fragments to the repository under `src/api`, you need to re-run the type generation script:

```bash
npm run api:generate-types
```

Note that the above script should be able to access the API to run successfully. The script expects an `.env` file to exist in the `/collections` directory and contain

```dotenv
SCHEMA_PATH="[YOUR_SCHEMA_PATH_HERE]"
```

The generated types are saved in `/src/api/generatedTypes.ts`. You will need to format this file with the preferred Prettier config for the project. Do not edit this file otherwise as the next time the types will be regenerated your changes will be lost.
